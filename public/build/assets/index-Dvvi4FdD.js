import{a as U,r as i,b as c,j as e,L as f}from"./app-DcO9B_4T.js";import{A as Q}from"./admin-layout-HXREM2t6.js";import{a as P}from"./createLucideIcon-BjdxXtgX.js";import{S as X}from"./search-CuWFUvm5.js";import{C as S}from"./circle-check-big-C2n5-IDd.js";import{M as z,P as E}from"./phone--o7BXoSZ.js";import{M as k}from"./mail-Bzf2Eijv.js";import{E as $}from"./eye-CxneEDfq.js";import{T as j}from"./trash-2-1OZ5n-2Z.js";import{B as q}from"./house-DumUgdUp.js";import{C as H}from"./calendar-NI90JW1w.js";import{U as G}from"./user-plus-RseEp_QW.js";/* empty css            */import"./chevron-right-BIlapGjV.js";import"./users-DYMhu5TQ.js";import"./user-sDHL7x7S.js";import"./log-out-BumM4GSJ.js";import"./x-aMVeChoY.js";const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A=P("CircleX",J);const K=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],O=P("Filter",K),he=()=>{const{props:F}=U(),{candidates:r,filters:n,categories:v}=F,[o,D]=i.useState(n?.search||""),[d,L]=i.useState(n?.category||"all"),[m,T]=i.useState(n?.status||"all"),[x,V]=i.useState(typeof n?.sort=="string"?n.sort:"newest"),[y,I]=i.useState(!1),[M,u]=i.useState(!1),[h,b]=i.useState(null);i.useEffect(()=>{const s=setTimeout(()=>{o!==(n?.search||"")&&R()},500);return()=>clearTimeout(s)},[o]);const p=(s,a)=>{s==="category"&&L(a),s==="status"&&T(a),s==="sort"&&V(a);const l={search:o,category:s==="category"?a:d,status:s==="status"?a:m,sort:s==="sort"?a:x};c.get("/dashboard/candidat",l,{preserveState:!0,preserveScroll:!0,replace:!0})},R=()=>{c.get("/dashboard/candidat",{search:o,category:d,status:m,sort:x},{preserveState:!0,preserveScroll:!0,replace:!0})},N=s=>{b(s),u(!0)},B=()=>{h&&c.delete(`/dashboard/candidat/${h.id}`,{onSuccess:()=>{u(!1),b(null)}})},g=s=>{s&&c.get(s,{},{preserveState:!0,preserveScroll:!0})},w=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"reviewed":return"bg-yellow-100 text-yellow-800";case"interview":return"bg-purple-100 text-purple-800";case"hired":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=s=>{switch(s){case"new":return"Nouveau";case"reviewed":return"En cours";case"interview":return"Entretien";case"hired":return"Embauché";case"rejected":return"Refusé";default:return s}};return e.jsxs(Q,{title:"Liste des candidats",children:[e.jsxs("div",{className:"w-full px-4 py-4 sm:px-6 sm:py-6 lg:px-8",children:[e.jsx("div",{className:"mb-4 flex flex-col space-y-4 sm:mb-6 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 sm:text-2xl",children:"Liste des candidats"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r.total," candidat",r.total>1?"s":""," trouvé",r.total>1?"s":""]})]})}),e.jsxs("div",{className:"mb-4 rounded-lg bg-white p-3 shadow sm:mb-6 sm:p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between sm:hidden",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtres"}),e.jsx("button",{onClick:()=>I(!y),className:"rounded-md p-1 text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:e.jsx(O,{size:20})})]}),e.jsx("div",{className:`${y?"block":"hidden"} sm:block`,children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 sm:gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(X,{className:"h-4 w-4 text-gray-400 sm:h-5 sm:w-5"})}),e.jsx("input",{type:"text",value:o,onChange:s=>D(s.target.value),className:"block w-full rounded-md border border-gray-300 bg-white py-2 pr-3 pl-9 text-sm leading-5 placeholder-gray-500 focus:border-indigo-500 focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:outline-none sm:pl-10",placeholder:"Rechercher..."})]}),e.jsx("div",{children:e.jsxs("select",{value:d,onChange:s=>p("category",s.target.value),className:"block w-full rounded-md border-gray-300 py-2 pr-10 pl-3 text-sm focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"all",children:"Toutes les catégories"}),v&&v.map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{children:e.jsxs("select",{value:m,onChange:s=>p("status",s.target.value),className:"block w-full rounded-md border-gray-300 py-2 pr-10 pl-3 text-sm focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"new",children:"Nouveau"}),e.jsx("option",{value:"reviewed",children:"En cours"}),e.jsx("option",{value:"interview",children:"Entretien"}),e.jsx("option",{value:"hired",children:"Embauché"}),e.jsx("option",{value:"rejected",children:"Refusé"})]})}),e.jsx("div",{children:e.jsxs("select",{value:x,onChange:s=>p("sort",s.target.value),className:"block w-full rounded-md border-gray-300 py-2 pr-10 pl-3 text-sm focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"newest",children:"Plus récents"}),e.jsx("option",{value:"oldest",children:"Plus anciens"}),e.jsx("option",{value:"name",children:"Par nom"})]})})]})})]}),e.jsx("div",{className:"overflow-hidden bg-white shadow sm:rounded-md",children:r.data.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:r.data.map(s=>{const a=!!s.user.profile,l=s.user.is_active,t=s.user.profile||{};return e.jsx("li",{className:"hover:bg-gray-50",children:e.jsxs("div",{className:"px-3 py-3 sm:px-4 sm:py-5",children:[e.jsx("div",{className:"sm:hidden",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:t.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.user.name)}&background=random`,alt:s.user.name}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:a?t.name:s.user.name}),l&&a&&e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${w(t.status)}`,children:C(t.status)})]}),e.jsx("div",{className:"mt-1 mb-1",children:l?e.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700",children:[e.jsx(S,{size:10,className:"mr-1"})," ","CV Envoyé"]}):e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:[e.jsx(A,{size:10,className:"mr-1"})," ","CV Non envoyé"]})}),l&&a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"truncate text-sm text-gray-500",children:t.poste||"Poste non renseigné"}),e.jsxs("div",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsx(z,{size:12,className:"mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[t.country||"Pays N/A",","," ",t.city||"Ville N/A"]})]})]}):e.jsx("p",{className:"text-xs text-gray-400 italic",children:"Informations limitées"}),e.jsxs("div",{className:"mt-3 flex justify-end space-x-1",children:[l&&t.phone&&e.jsx("a",{href:`tel:${t.phone}`,className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-green-50 hover:text-green-600",title:"Appeler",children:e.jsx(E,{size:16})}),e.jsx("a",{href:`mailto:${s.user.email}`,className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-blue-50 hover:text-blue-600",title:"Envoyer un email",children:e.jsx(k,{size:16})}),l&&e.jsx(f,{href:`/dashboard/candidat/${s.id}`,className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"Voir le profil",children:e.jsx($,{size:16})}),e.jsx("button",{onClick:()=>N(s),className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Supprimer",children:e.jsx(j,{size:16})})]})]})]})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:t.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.user.name)}&background=random`,alt:s.user.name}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 sm:text-base",children:l?e.jsx(f,{href:`/dashboard/candidat/${s.id}`,className:"transition-colors hover:text-indigo-600",children:a?t.name:s.user.name}):e.jsx("span",{children:s.user.name})}),l?e.jsxs("span",{className:"ml-2 inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700",children:[e.jsx(S,{size:10,className:"mr-1"})," ","CV Envoyé"]}):e.jsxs("span",{className:"ml-2 inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:[e.jsx(A,{size:10,className:"mr-1"})," ","CV Non envoyé"]}),l&&a&&e.jsx("span",{className:`ml-2 inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${w(t.status)}`,children:C(t.status)})]}),l?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-500",children:t.poste||"Poste non renseigné"}),e.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[e.jsx(z,{size:14,className:"mr-1"}),t.country||"N/A",","," ",t.city||"N/A"]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"En attente de soumission du CV"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&t.phone&&e.jsx("a",{href:`tel:${t.phone}`,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-green-50 hover:text-green-600",title:"Appeler",children:e.jsx(E,{size:18})}),e.jsx("a",{href:`mailto:${s.user.email}`,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-blue-50 hover:text-blue-600",title:"Envoyer un email",children:e.jsx(k,{size:18})}),l&&e.jsx(f,{href:`/dashboard/candidat/${s.id}`,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"Voir le profil",children:e.jsx($,{size:18})}),e.jsx("button",{onClick:()=>N(s),className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Supprimer",children:e.jsx(j,{size:18})})]})]}),l&&a&&e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:14,className:"mr-1"}),t.experience||"Expérience non renseignée"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:14,className:"mr-1"}),t.appliedAt?new Date(t.appliedAt).toLocaleDateString("fr-FR"):"Date N/A"]})]})]})]})},s.id)})}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun candidat trouvé"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Essayez de modifier vos critères de recherche."})]})}),r.links&&r.links.length>3&&e.jsxs("div",{className:"rounded-b-lg border-t border-gray-200 bg-white px-4 py-3 shadow-sm sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[r.prev_page_url&&e.jsx("button",{onClick:()=>g(r.prev_page_url),className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Précédent"}),r.next_page_url&&e.jsx("button",{onClick:()=>g(r.next_page_url),className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Suivant"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Affichage de"," ",e.jsx("span",{className:"font-medium",children:r.from})," ","à"," ",e.jsx("span",{className:"font-medium",children:r.to})," ","sur"," ",e.jsx("span",{className:"font-medium",children:r.total})," ","résultats"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:r.links.map((s,a)=>(s.label,e.jsx("button",{onClick:()=>g(s.url),disabled:!s.url||s.active,className:`relative inline-flex items-center border px-4 py-2 text-sm font-medium ${s.active?"z-10 border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"} ${s.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:s.label}},a)))})})]})]})]}),M&&e.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center px-4",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gray-500/75","aria-hidden":"true"}),e.jsxs("div",{className:"relative z-50 w-full max-w-lg transform overflow-hidden rounded-lg bg-white shadow-xl transition-all",children:[e.jsx("div",{className:"px-6 pt-5 pb-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-red-100",children:e.jsx(j,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Supprimer le candidat"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Êtes-vous sûr de vouloir supprimer le candidat"," ",e.jsx("span",{className:"font-medium text-gray-900",children:h?.user.name})," ","? Cette action est irréversible."]})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 bg-gray-50 px-6 py-3 sm:flex-row sm:justify-end",children:[e.jsx("button",{onClick:()=>u(!1),className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none",children:"Annuler"}),e.jsx("button",{onClick:B,className:"inline-flex justify-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none",children:"Supprimer"})]})]})]})]})};export{he as default};
