import{a as q,r as i,b as c,j as e,L as d}from"./app-Cd4PVpVu.js";import{A as H}from"./admin-layout-CQjs9jJI.js";import{U as z}from"./user-plus-Dd4WVzt4.js";import{a as y}from"./createLucideIcon-kiuQgY5B.js";import{S as Q}from"./search-CaHUufyr.js";import{C as k}from"./circle-check-big-fXO_kg0X.js";import{M as E,P as A}from"./phone-D73vMkXN.js";import{M as $}from"./mail-DjqadZyT.js";import{E as P}from"./eye-BI_mHwYA.js";import{T as j}from"./trash-2-BswsqwF5.js";import{B as X}from"./house-B0jKcoOI.js";import{C as G}from"./calendar-KG1qOmXu.js";/* empty css            */import"./chevron-right-CJjqTlbz.js";import"./users-x4RHnTG_.js";import"./user-BvH5vCCz.js";import"./log-out-CwRzzbML.js";import"./x-Cq299Tkv.js";const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],D=y("CircleX",J);const K=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],O=y("Download",K);const W=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Y=y("Filter",W),ge=()=>{const{props:F}=q(),{candidates:r,filters:l,categories:v}=F,[o,L]=i.useState(l?.search||""),[m,T]=i.useState(l?.category||"all"),[x,M]=i.useState(l?.status||"all"),[u,V]=i.useState(typeof l?.sort=="string"?l.sort:"newest"),[b,I]=i.useState(!1),[R,h]=i.useState(!1),[p,N]=i.useState(null);i.useEffect(()=>{const s=setTimeout(()=>{o!==(l?.search||"")&&B()},500);return()=>clearTimeout(s)},[o]);const g=(s,a)=>{s==="category"&&T(a),s==="status"&&M(a),s==="sort"&&V(a);const n={search:o,category:s==="category"?a:m,status:s==="status"?a:x,sort:s==="sort"?a:u};c.get("/dashboard/candidat",n,{preserveState:!0,preserveScroll:!0,replace:!0})},B=()=>{c.get("/dashboard/candidat",{search:o,category:m,status:x,sort:u},{preserveState:!0,preserveScroll:!0,replace:!0})},w=s=>{N(s),h(!0)},U=()=>{p&&c.delete(`/dashboard/candidat/${p.id}`,{onSuccess:()=>{h(!1),N(null)}})},f=s=>{s&&c.get(s,{},{preserveState:!0,preserveScroll:!0})},C=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"reviewed":return"bg-yellow-100 text-yellow-800";case"interview":return"bg-purple-100 text-purple-800";case"hired":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=s=>{switch(s){case"new":return"Nouveau";case"reviewed":return"En cours";case"interview":return"Entretien";case"hired":return"Embauché";case"rejected":return"Refusé";default:return s}};return e.jsxs(H,{title:"Liste des candidats",children:[e.jsxs("div",{className:"w-full px-4 py-4 sm:px-6 sm:py-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4 flex flex-col space-y-4 sm:mb-6 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 sm:text-2xl",children:"Liste des candidats"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r.total," candidat",r.total>1?"s":""," trouvé",r.total>1?"s":""]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(d,{href:"/dashboard/candidat/ajouter",className:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none sm:px-4 sm:text-sm",children:[e.jsx(z,{size:16,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter un candidat"}),e.jsx("span",{className:"sm:hidden",children:"Ajouter"})]}),e.jsxs("button",{className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none sm:px-4 sm:text-sm",children:[e.jsx(O,{size:16,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exporter"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})]})]}),e.jsxs("div",{className:"mb-4 rounded-lg bg-white p-3 shadow sm:mb-6 sm:p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between sm:hidden",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtres"}),e.jsx("button",{onClick:()=>I(!b),className:"rounded-md p-1 text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:e.jsx(Y,{size:20})})]}),e.jsx("div",{className:`${b?"block":"hidden"} sm:block`,children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 sm:gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(Q,{className:"h-4 w-4 text-gray-400 sm:h-5 sm:w-5"})}),e.jsx("input",{type:"text",value:o,onChange:s=>L(s.target.value),className:"block w-full rounded-md border border-gray-300 bg-white py-2 pr-3 pl-9 text-sm leading-5 placeholder-gray-500 focus:border-indigo-500 focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:outline-none sm:pl-10",placeholder:"Rechercher..."})]}),e.jsx("div",{children:e.jsxs("select",{value:m,onChange:s=>g("category",s.target.value),className:"block w-full rounded-md border-gray-300 py-2 pr-10 pl-3 text-sm focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"all",children:"Toutes les catégories"}),v&&v.map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{children:e.jsxs("select",{value:x,onChange:s=>g("status",s.target.value),className:"block w-full rounded-md border-gray-300 py-2 pr-10 pl-3 text-sm focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"new",children:"Nouveau"}),e.jsx("option",{value:"reviewed",children:"En cours"}),e.jsx("option",{value:"interview",children:"Entretien"}),e.jsx("option",{value:"hired",children:"Embauché"}),e.jsx("option",{value:"rejected",children:"Refusé"})]})}),e.jsx("div",{children:e.jsxs("select",{value:u,onChange:s=>g("sort",s.target.value),className:"block w-full rounded-md border-gray-300 py-2 pr-10 pl-3 text-sm focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"newest",children:"Plus récents"}),e.jsx("option",{value:"oldest",children:"Plus anciens"}),e.jsx("option",{value:"name",children:"Par nom"})]})})]})})]}),e.jsx("div",{className:"overflow-hidden bg-white shadow sm:rounded-md",children:r.data.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:r.data.map(s=>{const a=!!s.user.profile,n=s.user.is_active,t=s.user.profile||{};return e.jsx("li",{className:"hover:bg-gray-50",children:e.jsxs("div",{className:"px-3 py-3 sm:px-4 sm:py-5",children:[e.jsx("div",{className:"sm:hidden",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:t.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.user.name)}&background=random`,alt:s.user.name}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:a?t.name:s.user.name}),n&&a&&e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${C(t.status)}`,children:S(t.status)})]}),e.jsx("div",{className:"mt-1 mb-1",children:n?e.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700",children:[e.jsx(k,{size:10,className:"mr-1"})," ","CV Envoyé"]}):e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:[e.jsx(D,{size:10,className:"mr-1"})," ","CV Non envoyé"]})}),n&&a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"truncate text-sm text-gray-500",children:t.poste||"Poste non renseigné"}),e.jsxs("div",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsx(E,{size:12,className:"mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[t.country||"Pays N/A",","," ",t.city||"Ville N/A"]})]})]}):e.jsx("p",{className:"text-xs text-gray-400 italic",children:"Informations limitées"}),e.jsxs("div",{className:"mt-3 flex justify-end space-x-1",children:[n&&t.phone&&e.jsx("a",{href:`tel:${t.phone}`,className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-green-50 hover:text-green-600",title:"Appeler",children:e.jsx(A,{size:16})}),e.jsx("a",{href:`mailto:${s.user.email}`,className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-blue-50 hover:text-blue-600",title:"Envoyer un email",children:e.jsx($,{size:16})}),n&&e.jsx(d,{href:`/dashboard/candidat/${s.id}`,className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"Voir le profil",children:e.jsx(P,{size:16})}),e.jsx("button",{onClick:()=>w(s),className:"rounded-full p-1.5 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Supprimer",children:e.jsx(j,{size:16})})]})]})]})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:t.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.user.name)}&background=random`,alt:s.user.name}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 sm:text-base",children:n?e.jsx(d,{href:`/dashboard/candidat/${s.id}`,className:"transition-colors hover:text-indigo-600",children:a?t.name:s.user.name}):e.jsx("span",{children:s.user.name})}),n?e.jsxs("span",{className:"ml-2 inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700",children:[e.jsx(k,{size:10,className:"mr-1"})," ","CV Envoyé"]}):e.jsxs("span",{className:"ml-2 inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:[e.jsx(D,{size:10,className:"mr-1"})," ","CV Non envoyé"]}),n&&a&&e.jsx("span",{className:`ml-2 inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${C(t.status)}`,children:S(t.status)})]}),n?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-500",children:t.poste||"Poste non renseigné"}),e.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[e.jsx(E,{size:14,className:"mr-1"}),t.country||"N/A",","," ",t.city||"N/A"]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"En attente de soumission du CV"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n&&t.phone&&e.jsx("a",{href:`tel:${t.phone}`,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-green-50 hover:text-green-600",title:"Appeler",children:e.jsx(A,{size:18})}),e.jsx("a",{href:`mailto:${s.user.email}`,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-blue-50 hover:text-blue-600",title:"Envoyer un email",children:e.jsx($,{size:18})}),n&&e.jsx(d,{href:`/dashboard/candidat/${s.id}`,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-indigo-50 hover:text-indigo-600",title:"Voir le profil",children:e.jsx(P,{size:18})}),e.jsx("button",{onClick:()=>w(s),className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",title:"Supprimer",children:e.jsx(j,{size:18})})]})]}),n&&a&&e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{size:14,className:"mr-1"}),t.experience||"Expérience non renseignée"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{size:14,className:"mr-1"}),t.appliedAt?new Date(t.appliedAt).toLocaleDateString("fr-FR"):"Date N/A"]})]})]})]})},s.id)})}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun candidat trouvé"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Essayez de modifier vos critères de recherche."})]})}),r.links&&r.links.length>3&&e.jsxs("div",{className:"rounded-b-lg border-t border-gray-200 bg-white px-4 py-3 shadow-sm sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[r.prev_page_url&&e.jsx("button",{onClick:()=>f(r.prev_page_url),className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Précédent"}),r.next_page_url&&e.jsx("button",{onClick:()=>f(r.next_page_url),className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Suivant"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Affichage de"," ",e.jsx("span",{className:"font-medium",children:r.from})," ","à"," ",e.jsx("span",{className:"font-medium",children:r.to})," ","sur"," ",e.jsx("span",{className:"font-medium",children:r.total})," ","résultats"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:r.links.map((s,a)=>(s.label,e.jsx("button",{onClick:()=>f(s.url),disabled:!s.url||s.active,className:`relative inline-flex items-center border px-4 py-2 text-sm font-medium ${s.active?"z-10 border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"} ${s.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:s.label}},a)))})})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(j,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Supprimer le candidat"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:['Êtes-vous sûr de vouloir supprimer le candidat "',p?.user.name,'" ? Cette action ne peut pas être annulée.']})})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx("button",{type:"button",onClick:U,className:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:"Supprimer"}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Annuler"})]})]})]})})]})};export{ge as default};
